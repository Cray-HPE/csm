apiVersion: manifests/v1beta1
metadata:
  name: platform
spec:
  charts:
  - name: cray-metrics-server
    version: 0.1.2
    namespace: kube-system
  - name: cray-drydock
    version: 2.6.2
    namespace: loftsman
  - name: cray-velero
    version: 0.0.2
    namespace: velero
  - name: sealed-secrets
    version: 0.1.0
    namespace: kube-system
  - name: cray-node-problem-detector
    version: 1.4.0
    namespace: kube-system
  - name: cray-istio-operator
    version: 1.18.3
    namespace: istio-system
  - name: cray-istio-deploy
    version: 1.18.9
    namespace: istio-system
  - name: cray-certmanager-init
    version: 0.5.0
    namespace: cert-manager-init
  - name: cray-opa
    version: 0.13.5
    namespace: opa
  - name: cray-etcd-operator
    version: 0.14.2
    namespace: operators
  - name: cray-vault-operator
    version: 1.0.1
    namespace: vault
  - name: cray-vault
    version: 1.0.5
    namespace: vault
  - name: trustedcerts-operator
    version: 0.1.1
    namespace: pki-operator
  - name: cray-certmanager
    version: 0.5.0
    namespace: cert-manager
  - name: cray-s3
    version: 0.2.0
    namespace: ceph-rgw
  - name: cray-certmanager-issuers
    version: 0.4.0
    namespace: cert-manager
  - name: cray-istio
    version: 1.24.4
    namespace: istio-system
  - name: cray-externaldns
    version: 0.11.2
    namespace: services
  - name: cray-sysmgmt-health
    version: 0.8.8
    namespace: sysmgmt-health
    values:
      prometheus-operator:
        prometheus:
          prometheusSpec:
            resources:
              limits:
                cpu: '6'
                memory: 30Gi
              requests:
                cpu: '2'
                memory: 15Gi
            retention: 48h
  - name: cray-postgres-operator
    version: 0.9.3
    namespace: services
    values:
      postgres-operator:
        configGeneral:
          # Override the image repository since registry.opensource.zalan.do is
          # not in containerd's registry mirror configuration
          docker_image: 'dtr.dev.cray.com/acid/spilo-12:1.6-p3'
  - name: cray-kafka-operator
    version: 0.4.1
    namespace: operators
  - name: spire-intermediate
    version: 0.2.1
    namespace: vault
  - name: cray-keycloak
    version: 1.10.7
    namespace: services
  - name: cray-keycloak-users-localize
    version: 1.5.6
    namespace: services
  - name: cray-node-discovery
    version: 0.5.3
    namespace: services
    values:
      imagesHost: dtr.dev.cray.com
  - name: cray-shared-kafka
    version: 0.4.1
    namespace: services
  - name: cray-sts
    version: 0.4.2
    namespace: services
  - name: cray-etcd-defrag
    version: 0.2.3
    namespace: operators
  - name: cray-etcd-backup
    version: 0.2.5
    namespace: operators
  - name: cray-precache-images
    version: 0.2.0
    namespace: nexus
    values:
      cacheImages:
      - docker.io/sonatype/nexus3:3.25.0
      - dtr.dev.cray.com/baseos/busybox:1
      - dtr.dev.cray.com/cray/cray-dns-unbound:0.1.11
      - dtr.dev.cray.com/cray/proxyv2:1.6.13-cray1
      - k8s.gcr.io/pause:3.2
      # TODO remove the following once fixed to use k8s.gcr.io/pause:3.2:
      - dtr.dev.cray.com/k8s.gcr.io/pause:3.2
  - name: cray-metallb
    version: 0.12.3
    namespace: metallb-system
  - name: cray-baremetal-etcd-backup
    version: 0.1.0
    namespace: kube-system
  - name: cray-node-labels
    version: 0.1.0
    namespace: services
